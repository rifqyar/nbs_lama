/*!
 * iScroll v4.1.8 ~ Copyright (c) 2011 Matteo Spinelli, http://cubiq.org
 * Released under MIT license, http://cubiq.org/license
 */

(function(){var g=Math,f=/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":"opera"in window?"O":"",v="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,m="ontouchstart"in window,A=f+"Transform"in document.documentElement.style,B=/android/gi.test(navigator.appVersion),w=/iphone|ipad/gi.test(navigator.appVersion),r=/playbook/gi.test(navigator.appVersion),D=w||r,E=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||
window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(b){return setTimeout(b,1)}}(),C=window.cancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout,x="onorientationchange"in window?"orientationchange":"resize",y=m?"touchstart":"mousedown",s=m?"touchmove":"mousemove",t=m?"touchend":"mouseup",u=m?"touchcancel":"mouseup",z=f=="Moz"?"DOMMouseScroll":
"mousewheel",p="translate"+(v?"3d(":"("),q=v?",0)":")",r=function(b,a){var c=this,d;c.wrapper=typeof b=="object"?b:document.getElementById(b);c.wrapper.style.overflow="hidden";c.scroller=c.wrapper.children[0];c.options={hScroll:!0,vScroll:!0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:B,hideScrollbar:w,fadeScrollbar:w&&v,scrollbarClass:"",zoom:!1,zoomMin:1,zoomMax:4,doubleTapZoom:2,
wheelAction:"scroll",snap:!1,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(a){a.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(d in a)c.options[d]=a[d];c.options.useTransform=A?c.options.useTransform:!1;c.options.hScrollbar=c.options.hScroll&&c.options.hScrollbar;c.options.vScrollbar=c.options.vScroll&&c.options.vScrollbar;c.options.zoom=
c.options.useTransform&&c.options.zoom;c.options.useTransition=D&&c.options.useTransition;c.scroller.style[f+"TransitionProperty"]=c.options.useTransform?"-"+f.toLowerCase()+"-transform":"top left";c.scroller.style[f+"TransitionDuration"]="0";c.scroller.style[f+"TransformOrigin"]="0 0";c.options.useTransition&&(c.scroller.style[f+"TransitionTimingFunction"]="cubic-bezier(0.33,0.66,0.66,1)");c.options.useTransform?c.scroller.style[f+"Transform"]=p+"0,0"+q:c.scroller.style.cssText+=";position:absolute;top:0;left:0";
if(c.options.useTransition)c.options.fixedScrollbar=!0;c.refresh();c._bind(x,window);c._bind(y);m||(c._bind("mouseout",c.wrapper),c._bind(z));if(c.options.checkDOMChanges)c.checkDOMTime=setInterval(function(){c._checkDOMChanges()},500)};r.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(b){switch(b.type){case y:if(!m&&b.button!==0)break;this._start(b);break;case s:this._move(b);break;case t:case u:this._end(b);
break;case x:this._resize();break;case z:this._wheel(b);break;case "mouseout":this._mouseout(b);break;case "webkitTransitionEnd":this._transitionEnd(b)}},_checkDOMChanges:function(){!this.moved&&!this.zoomed&&!(this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale)&&this.refresh()},_scrollbar:function(b){var a=document,c;if(this[b+"Scrollbar"]){if(!this[b+"ScrollbarWrapper"]){c=a.createElement("div");this.options.scrollbarClass?
c.className=this.options.scrollbarClass+b.toUpperCase():c.style.cssText="position:absolute;z-index:100;"+(b=="h"?"height:7px;bottom:1px;left:2px;right:"+(this.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(this.hScrollbar?"7":"2")+"px;top:2px;right:1px");c.style.cssText+=";pointer-events:none;-"+f+"-transition-property:opacity;-"+f+"-transition-duration:"+(this.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(this.options.hideScrollbar?"0":"1");this.wrapper.appendChild(c);this[b+"ScrollbarWrapper"]=
c;c=a.createElement("div");if(!this.options.scrollbarClass)c.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);-"+f+"-background-clip:padding-box;-"+f+"-box-sizing:border-box;"+(b=="h"?"height:100%":"width:100%")+";-"+f+"-border-radius:3px;border-radius:3px";c.style.cssText+=";pointer-events:none;-"+f+"-transition-property:-"+f+"-transform;-"+f+"-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);-"+f+"-transition-duration:0;-"+f+
"-transform:"+p+"0,0"+q;this.options.useTransition&&(c.style.cssText+=";-"+f+"-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)");this[b+"ScrollbarWrapper"].appendChild(c);this[b+"ScrollbarIndicator"]=c}b=="h"?(this.hScrollbarSize=this.hScrollbarWrapper.clientWidth,this.hScrollbarIndicatorSize=g.max(g.round(this.hScrollbarSize*this.hScrollbarSize/this.scrollerW),8),this.hScrollbarIndicator.style.width=this.hScrollbarIndicatorSize+"px",this.hScrollbarMaxScroll=this.hScrollbarSize-this.hScrollbarIndicatorSize,
this.hScrollbarProp=this.hScrollbarMaxScroll/this.maxScrollX):(this.vScrollbarSize=this.vScrollbarWrapper.clientHeight,this.vScrollbarIndicatorSize=g.max(g.round(this.vScrollbarSize*this.vScrollbarSize/this.scrollerH),8),this.vScrollbarIndicator.style.height=this.vScrollbarIndicatorSize+"px",this.vScrollbarMaxScroll=this.vScrollbarSize-this.vScrollbarIndicatorSize,this.vScrollbarProp=this.vScrollbarMaxScroll/this.maxScrollY);this._scrollbarPos(b,!0)}else this[b+"ScrollbarWrapper"]&&(A&&(this[b+"ScrollbarIndicator"].style[f+
"Transform"]=""),this[b+"ScrollbarWrapper"].parentNode.removeChild(this[b+"ScrollbarWrapper"]),this[b+"ScrollbarWrapper"]=null,this[b+"ScrollbarIndicator"]=null)},_resize:function(){var b=this;setTimeout(function(){b.refresh()},B?200:0)},_pos:function(b,a){b=this.hScroll?b:0;a=this.vScroll?a:0;this.options.useTransform?this.scroller.style[f+"Transform"]=p+b+"px,"+a+"px"+q+" scale("+this.scale+")":(b=g.round(b),a=g.round(a),this.scroller.style.left=b+"px",this.scroller.style.top=a+"px");this.x=b;this.y=
a;this._scrollbarPos("h");this._scrollbarPos("v")},_scrollbarPos:function(b,a){var c=b=="h"?this.x:this.y;if(this[b+"Scrollbar"])c*=this[b+"ScrollbarProp"],c<0?(this.options.fixedScrollbar||(c=this[b+"ScrollbarIndicatorSize"]+g.round(c*3),c<8&&(c=8),this[b+"ScrollbarIndicator"].style[b=="h"?"width":"height"]=c+"px"),c=0):c>this[b+"ScrollbarMaxScroll"]&&(this.options.fixedScrollbar?c=this[b+"ScrollbarMaxScroll"]:(c=this[b+"ScrollbarIndicatorSize"]-g.round((c-this[b+"ScrollbarMaxScroll"])*3),c<8&&(c=
8),this[b+"ScrollbarIndicator"].style[b=="h"?"width":"height"]=c+"px",c=this[b+"ScrollbarMaxScroll"]+(this[b+"ScrollbarIndicatorSize"]-c))),this[b+"ScrollbarWrapper"].style[f+"TransitionDelay"]="0",this[b+"ScrollbarWrapper"].style.opacity=a&&this.options.hideScrollbar?"0":"1",this[b+"ScrollbarIndicator"].style[f+"Transform"]=p+(b=="h"?c+"px,0":"0,"+c+"px")+q},_start:function(b){var a=m?b.touches[0]:b,c,d;if(this.enabled){this.options.onBeforeScrollStart&&this.options.onBeforeScrollStart.call(this,
b);(this.options.useTransition||this.options.zoom)&&this._transitionTime(0);this.zoomed=this.animating=this.moved=!1;this.dirY=this.dirX=this.absDistY=this.absDistX=this.distY=this.distX=0;if(this.options.zoom&&m&&b.touches.length>1)d=g.abs(b.touches[0].pageX-b.touches[1].pageX),c=g.abs(b.touches[0].pageY-b.touches[1].pageY),this.touchesDistStart=g.sqrt(d*d+c*c),this.originX=g.abs(b.touches[0].pageX+b.touches[1].pageX-this.wrapperOffsetLeft*2)/2-this.x,this.originY=g.abs(b.touches[0].pageY+b.touches[1].pageY-
this.wrapperOffsetTop*2)/2-this.y,this.options.onZoomStart&&this.options.onZoomStart.call(this,b);if(this.options.momentum&&(this.options.useTransform?(c=getComputedStyle(this.scroller,null)[f+"Transform"].replace(/[^0-9-.,]/g,"").split(","),d=c[4]*1,c=c[5]*1):(d=getComputedStyle(this.scroller,null).left.replace(/[^0-9-]/g,"")*1,c=getComputedStyle(this.scroller,null).top.replace(/[^0-9-]/g,"")*1),d!=this.x||c!=this.y))this.options.useTransition?this._unbind("webkitTransitionEnd"):C(this.aniTime),
this.steps=[],this._pos(d,c);this.absStartX=this.x;this.absStartY=this.y;this.startX=this.x;this.startY=this.y;this.pointX=a.pageX;this.pointY=a.pageY;this.startTime=b.timeStamp||(new Date).getTime();this.options.onScrollStart&&this.options.onScrollStart.call(this,b);this._bind(s);this._bind(t);this._bind(u)}},_move:function(b){var a=m?b.touches[0]:b,c=a.pageX-this.pointX,d=a.pageY-this.pointY,e=this.x+c,j=this.y+d,k=b.timeStamp||(new Date).getTime();this.options.onBeforeScrollMove&&this.options.onBeforeScrollMove.call(this,
b);if(this.options.zoom&&m&&b.touches.length>1)e=g.abs(b.touches[0].pageX-b.touches[1].pageX),j=g.abs(b.touches[0].pageY-b.touches[1].pageY),this.touchesDist=g.sqrt(e*e+j*j),this.zoomed=!0,a=1/this.touchesDistStart*this.touchesDist*this.scale,a<this.options.zoomMin?a=0.5*this.options.zoomMin*Math.pow(2,a/this.options.zoomMin):a>this.options.zoomMax&&(a=2*this.options.zoomMax*Math.pow(0.5,this.options.zoomMax/a)),this.lastScale=a/this.scale,e=this.originX-this.originX*this.lastScale+this.x,j=this.originY-
this.originY*this.lastScale+this.y,this.scroller.style[f+"Transform"]=p+e+"px,"+j+"px"+q+" scale("+a+")",this.options.onZoom&&this.options.onZoom.call(this,b);else{this.pointX=a.pageX;this.pointY=a.pageY;if(e>0||e<this.maxScrollX)e=this.options.bounce?this.x+c/2:e>=0||this.maxScrollX>=0?0:this.maxScrollX;if(j>this.minScrollY||j<this.maxScrollY)j=this.options.bounce?this.y+d/2:j>=this.minScrollY||this.maxScrollY>=0?this.minScrollY:this.maxScrollY;if(this.absDistX<6&&this.absDistY<6)this.distX+=c,this.distY+=
d,this.absDistX=g.abs(this.distX),this.absDistY=g.abs(this.distY);else{if(this.options.lockDirection)if(this.absDistX>this.absDistY+5)j=this.y,d=0;else if(this.absDistY>this.absDistX+5)e=this.x,c=0;this.moved=!0;this._pos(e,j);this.dirX=c>0?-1:c<0?1:0;this.dirY=d>0?-1:d<0?1:0;if(k-this.startTime>300)this.startTime=k,this.startX=this.x,this.startY=this.y;this.options.onScrollMove&&this.options.onScrollMove.call(this,b)}}},_end:function(b){if(!(m&&b.touches.length!=0)){var a=this,c=m?b.changedTouches[0]:
b,d,e,j={dist:0,time:0},k={dist:0,time:0},o=(b.timeStamp||(new Date).getTime())-a.startTime,h=a.x,n=a.y;a._unbind(s);a._unbind(t);a._unbind(u);a.options.onBeforeScrollEnd&&a.options.onBeforeScrollEnd.call(a,b);if(a.zoomed)h=a.scale*a.lastScale,h=Math.max(a.options.zoomMin,h),h=Math.min(a.options.zoomMax,h),a.lastScale=h/a.scale,a.scale=h,a.x=a.originX-a.originX*a.lastScale+a.x,a.y=a.originY-a.originY*a.lastScale+a.y,a.scroller.style[f+"TransitionDuration"]="200ms",a.scroller.style[f+"Transform"]=
p+a.x+"px,"+a.y+"px"+q+" scale("+a.scale+")",a.zoomed=!1,a.refresh(),a.options.onZoomEnd&&a.options.onZoomEnd.call(a,b);else{if(a.moved){if(o<300&&a.options.momentum){j=h?a._momentum(h-a.startX,o,-a.x,a.scrollerW-a.wrapperW+a.x,a.options.bounce?a.wrapperW:0):j;k=n?a._momentum(n-a.startY,o,-a.y,a.maxScrollY<0?a.scrollerH-a.wrapperH+a.y-a.minScrollY:0,a.options.bounce?a.wrapperH:0):k;h=a.x+j.dist;n=a.y+k.dist;if(a.x>0&&h>0||a.x<a.maxScrollX&&h<a.maxScrollX)j={dist:0,time:0};if(a.y>a.minScrollY&&n>a.minScrollY||
a.y<a.maxScrollY&&n<a.maxScrollY)k={dist:0,time:0}}if(j.dist||k.dist){o=g.max(g.max(j.time,k.time),10);if(a.options.snap)j=h-a.absStartX,k=n-a.absStartY,g.abs(j)<a.options.snapThreshold&&g.abs(k)<a.options.snapThreshold?a.scrollTo(a.absStartX,a.absStartY,200):(snap=a._snap(h,n),h=snap.x,n=snap.y,o=g.max(snap.time,o));a.scrollTo(h,n,o)}else a.options.snap?(j=h-a.absStartX,k=n-a.absStartY,g.abs(j)<a.options.snapThreshold&&g.abs(k)<a.options.snapThreshold?a.scrollTo(a.absStartX,a.absStartY,200):(snap=
a._snap(a.x,a.y),(snap.x!=a.x||snap.y!=a.y)&&a.scrollTo(snap.x,snap.y,snap.time))):a._resetPos(200)}else{if(m)a.doubleTapTimer&&a.options.zoom?(clearTimeout(a.doubleTapTimer),a.doubleTapTimer=null,a.options.onZoomStart&&a.options.onZoomStart.call(a,b),a.zoom(a.pointX,a.pointY,a.scale==1?a.options.doubleTapZoom:1),a.options.onZoomEnd&&setTimeout(function(){a.options.onZoomEnd.call(a,b)},200)):a.doubleTapTimer=setTimeout(function(){a.doubleTapTimer=null;for(d=c.target;d.nodeType!=1;)d=d.parentNode;
if(d.tagName!="SELECT"&&d.tagName!="INPUT"&&d.tagName!="TEXTAREA")e=document.createEvent("MouseEvents"),e.initMouseEvent("click",!0,!0,b.view,1,c.screenX,c.screenY,c.clientX,c.clientY,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,0,null),e._fake=!0,d.dispatchEvent(e)},a.options.zoom?250:0);a._resetPos(200)}a.options.onTouchEnd&&a.options.onTouchEnd.call(a,b)}}},_resetPos:function(b){var a=this.x>=0?0:this.x<this.maxScrollX?this.maxScrollX:this.x,c=this.y>=this.minScrollY||this.maxScrollY>0?this.minScrollY:
this.y<this.maxScrollY?this.maxScrollY:this.y;if(a==this.x&&c==this.y){if(this.moved)this.moved=!1,this.options.onScrollEnd&&this.options.onScrollEnd.call(this);if(this.hScrollbar&&this.options.hideScrollbar)f=="webkit"&&(this.hScrollbarWrapper.style[f+"TransitionDelay"]="300ms"),this.hScrollbarWrapper.style.opacity="0";if(this.vScrollbar&&this.options.hideScrollbar)f=="webkit"&&(this.vScrollbarWrapper.style[f+"TransitionDelay"]="300ms"),this.vScrollbarWrapper.style.opacity="0"}else this.scrollTo(a,
c,b||0)},_wheel:function(b){var a=this,c,d;"wheelDeltaX"in b?(c=b.wheelDeltaX/12,d=b.wheelDeltaY/12):c="detail"in b?d=-b.detail*3:d=-b.wheelDelta;if(a.options.wheelAction=="zoom"){d=a.scale*Math.pow(2,1/3*(d?d/Math.abs(d):0));if(d<a.options.zoomMin)d=a.options.zoomMin;if(d>a.options.zoomMax)d=a.options.zoomMax;d!=a.scale&&(!a.wheelZoomCount&&a.options.onZoomStart&&a.options.onZoomStart.call(a,b),a.wheelZoomCount++,a.zoom(b.pageX,b.pageY,d,400),setTimeout(function(){a.wheelZoomCount--;!a.wheelZoomCount&&
a.options.onZoomEnd&&a.options.onZoomEnd.call(a,b)},400))}else{c=a.x+c;d=a.y+d;if(c>0)c=0;else if(c<a.maxScrollX)c=a.maxScrollX;if(d>a.minScrollY)d=a.minScrollY;else if(d<a.maxScrollY)d=a.maxScrollY;a.scrollTo(c,d,0)}},_mouseout:function(b){var a=b.relatedTarget;if(a)for(;a=a.parentNode;)if(a==this.wrapper)return;this._end(b)},_transitionEnd:function(b){b.target==this.scroller&&(this._unbind("webkitTransitionEnd"),this._startAni())},_startAni:function(){var b=this,a=b.x,c=b.y,d=(new Date).getTime(),
e,f;if(!b.animating)if(b.steps.length){e=b.steps.shift();if(e.x==a&&e.y==c)e.time=0;b.animating=!0;b.moved=!0;b.options.useTransition?(b._transitionTime(e.time),b._pos(e.x,e.y),b.animating=!1,e.time?b._bind("webkitTransitionEnd"):b._resetPos(0)):function o(){var h=(new Date).getTime();if(h>=d+e.time)b._pos(e.x,e.y),b.animating=!1,b.options.onAnimationEnd&&b.options.onAnimationEnd.call(b),b._startAni();else if(h=(h-d)/e.time-1,f=g.sqrt(1-h*h),h=(e.x-a)*f+a,b._pos(h,(e.y-c)*f+c),b.animating)b.aniTime=
E(o)}()}else b._resetPos(400)},_transitionTime:function(b){b+="ms";this.scroller.style[f+"TransitionDuration"]=b;this.hScrollbar&&(this.hScrollbarIndicator.style[f+"TransitionDuration"]=b);this.vScrollbar&&(this.vScrollbarIndicator.style[f+"TransitionDuration"]=b)},_momentum:function(b,a,c,d,e){var a=g.abs(b)/a,f=a*a/0.0012,k=0,k=0;b>0&&f>c?(c+=e/(6/(f/a*6.0E-4)),a=a*c/f,f=c):b<0&&f>d&&(d+=e/(6/(f/a*6.0E-4)),a=a*d/f,f=d);f*=b<0?-1:1;return{dist:f,time:g.round(a/6.0E-4)}},_offset:function(b){for(var a=
-b.offsetLeft,c=-b.offsetTop;b=b.offsetParent;)a-=b.offsetLeft,c-=b.offsetTop;b!=this.wrapper&&(a*=this.scale,c*=this.scale);return{left:a,top:c}},_snap:function(b,a){var c,d,e;e=this.pagesX.length-1;c=0;for(d=this.pagesX.length;c<d;c++)if(b>=this.pagesX[c]){e=c;break}e==this.currPageX&&e>0&&this.dirX<0&&e--;b=this.pagesX[e];d=(d=g.abs(b-this.pagesX[this.currPageX]))?g.abs(this.x-b)/d*500:0;this.currPageX=e;e=this.pagesY.length-1;for(c=0;c<e;c++)if(a>=this.pagesY[c]){e=c;break}e==this.currPageY&&
e>0&&this.dirY<0&&e--;a=this.pagesY[e];c=(c=g.abs(a-this.pagesY[this.currPageY]))?g.abs(this.y-a)/c*500:0;this.currPageY=e;e=g.round(g.max(d,c))||200;return{x:b,y:a,time:e}},_bind:function(b,a,c){(a||this.scroller).addEventListener(b,this,!!c)},_unbind:function(b,a,c){(a||this.scroller).removeEventListener(b,this,!!c)},destroy:function(){this.scroller.style[f+"Transform"]="";this.vScrollbar=this.hScrollbar=!1;this._scrollbar("h");this._scrollbar("v");this._unbind(x,window);this._unbind(y);this._unbind(s);
this._unbind(t);this._unbind(u);this.options.hasTouch&&(this._unbind("mouseout",this.wrapper),this._unbind(z));this.options.useTransition&&this._unbind("webkitTransitionEnd");this.options.checkDOMChanges&&clearInterval(this.checkDOMTime);this.options.onDestroy&&this.options.onDestroy.call(this)},refresh:function(){var b,a=0,c=0;if(this.scale<this.options.zoomMin)this.scale=this.options.zoomMin;this.wrapperW=this.wrapper.clientWidth||1;this.wrapperH=this.wrapper.clientHeight||1;this.minScrollY=-this.options.topOffset||
0;this.scrollerW=g.round(this.scroller.offsetWidth*this.scale);this.scrollerH=g.round((this.scroller.offsetHeight+this.minScrollY)*this.scale);this.maxScrollX=this.wrapperW-this.scrollerW;this.maxScrollY=this.wrapperH-this.scrollerH+this.minScrollY;this.dirY=this.dirX=0;this.options.onRefresh&&this.options.onRefresh.call(this);this.hScroll=this.options.hScroll&&this.maxScrollX<0;this.vScroll=this.options.vScroll&&(!this.options.bounceLock&&!this.hScroll||this.scrollerH>this.wrapperH);this.hScrollbar=
this.hScroll&&this.options.hScrollbar;this.vScrollbar=this.vScroll&&this.options.vScrollbar&&this.scrollerH>this.wrapperH;b=this._offset(this.wrapper);this.wrapperOffsetLeft=-b.left;this.wrapperOffsetTop=-b.top;if(typeof this.options.snap=="string"){this.pagesX=[];this.pagesY=[];els=this.scroller.querySelectorAll(this.options.snap);i=0;for(l=els.length;i<l;i++)a=this._offset(els[i]),a.left+=this.wrapperOffsetLeft,a.top+=this.wrapperOffsetTop,this.pagesX[i]=a.left<this.maxScrollX?this.maxScrollX:a.left*
this.scale,this.pagesY[i]=a.top<this.maxScrollY?this.maxScrollY:a.top*this.scale}else if(this.options.snap){for(this.pagesX=[];a>=this.maxScrollX;)this.pagesX[c]=a,a-=this.wrapperW,c++;this.maxScrollX%this.wrapperW&&(this.pagesX[this.pagesX.length]=this.maxScrollX-this.pagesX[this.pagesX.length-1]+this.pagesX[this.pagesX.length-1]);c=a=0;for(this.pagesY=[];a>=this.maxScrollY;)this.pagesY[c]=a,a-=this.wrapperH,c++;this.maxScrollY%this.wrapperH&&(this.pagesY[this.pagesY.length]=this.maxScrollY-this.pagesY[this.pagesY.length-
1]+this.pagesY[this.pagesY.length-1])}this._scrollbar("h");this._scrollbar("v");this.zoomed||(this.scroller.style[f+"TransitionDuration"]="0",this._resetPos(200))},scrollTo:function(b,a,c,d){var e=b;this.stop();e.length||(e=[{x:b,y:a,time:c,relative:d}]);b=0;for(a=e.length;b<a;b++){if(e[b].relative)e[b].x=this.x-e[b].x,e[b].y=this.y-e[b].y;this.steps.push({x:e[b].x,y:e[b].y,time:e[b].time||0})}this._startAni()},scrollToElement:function(b,a){var c;if(b=b.nodeType?b:this.scroller.querySelector(b))c=
this._offset(b),c.left+=this.wrapperOffsetLeft,c.top+=this.wrapperOffsetTop,c.left=c.left>0?0:c.left<this.maxScrollX?this.maxScrollX:c.left,c.top=c.top>this.minScrollY?this.minScrollY:c.top<this.maxScrollY?this.maxScrollY:c.top,a=a===void 0?g.max(g.abs(c.left)*2,g.abs(c.top)*2):a,this.scrollTo(c.left,c.top,a)},scrollToPage:function(b,a,c){if(this.options.snap)b=b=="next"?this.currPageX+1:b=="prev"?this.currPageX-1:b,a=a=="next"?this.currPageY+1:a=="prev"?this.currPageY-1:a,b=b<0?0:b>this.pagesX.length-
1?this.pagesX.length-1:b,a=a<0?0:a>this.pagesY.length-1?this.pagesY.length-1:a,this.currPageX=b,this.currPageY=a,b=this.pagesX[b],a=this.pagesY[a];else{b*=-this.wrapperW;a*=-this.wrapperH;if(b<this.maxScrollX)b=this.maxScrollX;if(a<this.maxScrollY)a=this.maxScrollY}this.scrollTo(b,a,c||400)},disable:function(){this.stop();this._resetPos(0);this.enabled=!1;this._unbind(s);this._unbind(t);this._unbind(u)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind("webkitTransitionEnd"):
C(this.aniTime);this.steps=[];this.animating=this.moved=!1},zoom:function(b,a,c,d){var e=c/this.scale;if(this.options.useTransform)this.zoomed=!0,d=d===void 0?200:d,b=b-this.wrapperOffsetLeft-this.x,a=a-this.wrapperOffsetTop-this.y,this.x=b-b*e+this.x,this.y=a-a*e+this.y,this.scale=c,this.refresh(),this.x=this.x>0?0:this.x<this.maxScrollX?this.maxScrollX:this.x,this.y=this.y>this.minScrollY?this.minScrollY:this.y<this.maxScrollY?this.maxScrollY:this.y,this.scroller.style[f+"TransitionDuration"]=d+
"ms",this.scroller.style[f+"Transform"]=p+this.x+"px,"+this.y+"px"+q+" scale("+c+")",this.zoomed=!1},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}};typeof exports!=="undefined"?exports.iScroll=r:window.iScroll=r})();